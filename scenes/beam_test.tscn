[gd_scene load_steps=7 format=3 uid="uid://datkqqbt3gs8w"]

[ext_resource type="Script" path="res://scripts/beam.gd" id="1_beam"]
[ext_resource type="PackedScene" uid="uid://bp0dfqx01lvgc" path="res://objects/beam.tscn" id="2_yh4g8"]
[ext_resource type="Shader" uid="uid://csaibbromvwnd" path="res://shaders/outline.gdshader" id="3_outline_shader"]
[ext_resource type="Shader" uid="uid://cmyxurc81lyux" path="res://shaders/beam.gdshader" id="4_beam_shader"]

[sub_resource type="GDScript" id="GDScript_test"]
script/source = "extends Node2D

func _process(_delta: float) -> void:
	# 테스트 씬에서는 마우스 위치를 타겟으로 설정
	$Holder/CanvasGroup/Beam.target_position = get_global_mouse_position()
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_outline"]
resource_local_to_scene = true
shader = ExtResource("3_outline_shader")
shader_parameter/outline_color = Color(1, 1, 1, 1)
shader_parameter/outline_thickness = 1.0000000475

[sub_resource type="ShaderMaterial" id="ShaderMaterial_beam"]
shader = ExtResource("4_beam_shader")
shader_parameter/color_inner = Color(1, 0.9, 0.6, 1)
shader_parameter/color_outer = Color(1, 0.2, 0.2, 1)
shader_parameter/speed = 20.0
shader_parameter/frequency = 10.0
shader_parameter/amplitude = 0.1
shader_parameter/beam_width_max = 0.3
shader_parameter/ripple_speed = 30.0

[node name="BeamTest" type="Node2D"]
script = SubResource("GDScript_test")

[node name="Holder" type="Node2D" parent="."]
position = Vector2(400, 300)

[node name="CanvasGroup" type="CanvasGroup" parent="Holder"]
material = SubResource("ShaderMaterial_outline")

[node name="Beam" parent="Holder/CanvasGroup" instance=ExtResource("2_yh4g8")]
script = ExtResource("1_beam")
material = SubResource("ShaderMaterial_beam")
